(function(e){function t(t){for(var i,s,a=t[0],h=t[1],l=t[2],c=0,m=[];c<a.length;c++)s=a[c],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&m.push(o[s][0]),o[s]=0;for(i in h)Object.prototype.hasOwnProperty.call(h,i)&&(e[i]=h[i]);d&&d(t);while(m.length)m.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],i=!0,a=1;a<n.length;a++){var h=n[a];0!==o[h]&&(i=!1)}i&&(r.splice(t--,1),e=s(s.s=n[0]))}return e}var i={},o={app:0},r=[];function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=i,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],h=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var d=h;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"2a1e":function(e,t,n){},3791:function(e,t,n){"use strict";n("2a1e")},"398d":function(e,t,n){},"52d2":function(e,t,n){"use strict";n("398d")},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var i=n("2b0e"),o=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("audio",{attrs:{src:"",id:"eventAudio"}}),t("div",{staticClass:"monitor"},[e.started?e._e():t("div",{staticClass:"btn btn-start",on:{click:function(t){return e.start()}}}),e.started?t("div",{staticClass:"btn btn-stop",on:{click:function(t){return e.stop()}}}):e._e(),t("Metronome",{ref:"metronome",staticClass:"metronome",attrs:{bpm:e.bpm,rhymePattern:e.rhymePattern}})],1),t("div",{staticClass:"control-panel"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col bpm-control"},[t("em",{staticClass:"btn btn-left",on:{click:function(t){return e.modifyBpm(-10)}}},[e._v("-10")]),t("em",{staticClass:"btn btn-left",on:{click:function(t){return e.modifyBpm(-1)}}},[e._v("-")]),e._v("\n         "+e._s(e.bpm)+"\n        "),t("em",{staticClass:"btn btn-right",on:{click:function(t){return e.modifyBpm(1)}}},[e._v("+")]),t("em",{staticClass:"btn btn-right",on:{click:function(t){return e.modifyBpm(10)}}},[e._v("+10")])])])])])},r=[],s=function(){var e=this,t=e._self._c;return t("div",{ref:"metronome",staticClass:"metronome",style:e.cssProps},[t("div",{ref:"rotateBox",staticClass:"rotate-box"},[t("div",{staticClass:"ball"})]),t("div",{staticClass:"drum"}),t("div",{staticClass:"left",class:{leftanimation:e.leftAnimation}}),t("div",{staticClass:"right",class:{rightanimation:e.rightAnimation}})])},a=[],h=(n("ac4d"),n("8a81"),n("5df3"),n("1c4c"),n("7f7f"),n("6b54"),n("28a5"),n("c5f6"),n("cffa"));function l(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=d(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,r=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw r}}}}function d(e,t){if(e){if("string"===typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var m={name:"Metronome",props:{bpm:{type:Number,default:40},rhymePattern:{type:String,default:"1"}},computed:{period:function(){return Math.floor(6e4/this.bpm)},beats:function(){var e,t=[],n=this.rhymePattern.split(","),i=l(n);try{for(i.s();!(e=i.n()).done;){for(var o=e.value,r=[],s=o.length,a=0;a<s;a++){var h=o.charAt(a);"0"!==h&&r.push({time:this.period*a/s,type:h})}t.push(r)}}catch(d){i.e(d)}finally{i.f()}return t},cssProps:function(){return{"--ball-radius":"20px","--rotate-box-height":this.rbHeight+"px"}}},data:function(){return{rbHeight:0,rbAngle:"0rad",ballTimeline:null,started:!1,timer:null,beatTimers:[],counter:0,audioCtx:null,gain:null,beepFrequency:{},leftAnimation:!1,rightAnimation:!1}},methods:{beep:function(e){console.log(e);var t=this.audioCtx.createOscillator();t.connect(this.gain),t.type="sine",t.start(0),t.stop(this.audioCtx.currentTime+.008),this.playAudio()},start:function(){this.started=!0,this.counter=0,this.ballTimeline=new h["b"],this.playInOnePeriod(),this.timer=setInterval(function(){this.playInOnePeriod()}.bind(this),this.period)},stop:function(){this.started=!1,null!==this.ballTimeline&&(this.ballTimeline.pause(),this.ballTimeline.progress(0),this.ballTimeline.kill(),this.ballTimeline=null),this.counter=0,clearInterval(this.timer),this.timer=null;for(var e=0;e<this.beatTimers.length;e++)clearTimeout(this.beatTimers[e])},playInOnePeriod:function(){var e=this;0==this.counter?(this.leftAnimation=!1,this.rightAnimation=!1,this.ballTimeline.to(this.$refs.rotateBox,this.period/1e3,{ease:h["a"].easeNone,rotation:this.rbAngle})):this.counter>0&&this.counter%2==0?(this.ballTimeline.play(),this.leftAnimation=!0,this.rightAnimation=!1):this.counter>0&&this.counter%2==1&&(this.leftAnimation=!1,this.rightAnimation=!0,this.ballTimeline.reverse());var t,n=this.counter%this.beats.length,i=l(this.beats[n]);try{var o=function(){var n=t.value;e.beatTimers=[];var i=setTimeout(function(){this.beep(n.type)}.bind(e),n.time);e.beatTimers.push(i)};for(i.s();!(t=i.n()).done;)o()}catch(r){i.e(r)}finally{i.f()}this.counter=this.counter+1}},watch:{bpm:function(){this.started&&(this.stop(),this.start())}},mounted:function(){var e=this.$refs.metronome.clientWidth,t=this.$refs.metronome.clientHeight,n=(e*e+4*t*t)/(8*t);this.rbAngle=2*Math.asin(e/(2*n))/Math.PI*180,this.rbHeight=2*Math.sqrt(n*n-e/2*(e/2)),this.audioCtx=new AudioContext,this.gain=this.audioCtx.createGain(),this.gain.connect(this.audioCtx.destination)}},u=m,f=(n("3791"),n("2877")),p=Object(f["a"])(u,s,a,!1,null,null,null),y=p.exports,b=function(){var e=this,t=e._self._c;return t("div",{class:["note",e.draw.noteClass],style:e.cssProps},e._l(e.draw.pieces,(function(n,i){return t("div",{key:i,class:["piece",n.class]},e._l(n.parts,(function(e,n){return t("div",{key:n,class:[e]})})),0)})),0)},w=[];function v(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,r=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw r}}}}function _(e,t){if(e){if("string"===typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var P={name:"MusicalNote",props:{description:{type:String,default:""},color:{type:String,default:"black"},backgroundColor:{type:String,default:"white"}},computed:{cssProps:function(){return{"--color":this.color,"--backgroundColor":this.backgroundColor}},draw:function(){var e=this.description,t="",n=[];-1===e.indexOf(">")&&(e=">"+e);var i=e.split(">");t=i[0];var o,r=i[1],s=r.split("|"),a=v(s);try{for(a.s();!(o=a.n()).done;){var h=o.value;-1===h.indexOf("@")&&(h="@"+h),i=h.split("@"),n.push({class:i[0],parts:i[1].split(",")})}}catch(l){a.e(l)}finally{a.f()}return{noteClass:t,pieces:n}}}},A=P,C=(n("a869"),Object(f["a"])(A,b,w,!1,null,"8b62b99a",null)),x=C.exports,O={name:"app",components:{Metronome:y,MusicalNote:x},data:function(){return{bpm:60,rhymePattern:"1",started:!1,notes:{"1/4":{descriptions:["stem,head"],rhymePattern:"1"},"1/8_1/8":{descriptions:["stem,head|hline one|hline  one|stem,head,hline one"],rhymePattern:"12"},"1/16_1/16_1/16_1/16":{descriptions:["stem,head|w1o3@stem,head,hline one,hline two|w1o3@stem,head,hline one,hline two|w1o3@stem,head,hline one,hline two"],rhymePattern:"1222"},"1/16_1/16_1/16_1/16_1/4":{descriptions:["stem,head|w1o3@stem,head,hline one,hline two|w1o3@stem,head,hline one,hline two|w1o3@stem,head,hline one,hline two","stem,head"],rhymePattern:"1222,1"},"1/12_1/12_1/12":{descriptions:["tuple t3>stem,head|hline one|stem,head,hline one|hline one|stem,head,hline one"],rhymePattern:"122"},"1/12_1/12_1/12_1/4":{descriptions:["tuple t3>stem,head|hline one|stem,head,hline one|hline one|stem,head,hline one","stem,head"],rhymePattern:"122,1"},"1/20_1/20_1/20_1/20_1/20":{descriptions:["tuple t5>stem,head|w1o5@hline one,stem,head|w1o5@hline one,stem,head|w1o5@hline one,stem,head|w1o5@hline one,stem,head"],rhymePattern:"12222"},"1/20_1/20_1/20_1/20_1/20_1/4":{descriptions:["tuple t5>stem,head|w1o3@hline one,stem,head|w1o3@hline one,stem,head|w1o3@hline one,stem,head|w1o3@hline one,stem,head","stem,head"],rhymePattern:"12222,1"},"3/16_1/16":{descriptions:["stem,head|hline one,dot|hline one|stem,head,hline one,hline two"],rhymePattern:"1002"},"3/16_1/16_1/4":{descriptions:["stem,head|hline one,dot|hline one|stem,head,hline one,hline two","stem,head"],rhymePattern:"1002,1"},"1/16_3/16":{descriptions:["stem,head|hline one,hline two|w1o5@hline one,stem,head|dot"],rhymePattern:"1200"},"1/16_3/16_1/4":{descriptions:["stem,head|hline one,hline two|w1o5@hline one,stem,head|dot","stem,head"],rhymePattern:"1200,1"},"1/8_1/16_1/16":{descriptions:["stem,head|w1o5@stem,head,hline one|w1o5@stem,head,hline one,hline two"],rhymePattern:"1022"},"1/8_1/16_1/16_1/4":{descriptions:["stem,head|w1o5@stem,head,hline one|w1o5@stem,head,hline one,hline two","stem,head"],rhymePattern:"1022,1"},"1/16_1/16_1/8":{descriptions:["stem,head|w1o5@stem,head,hline one, hline two|w1o5@stem,head,hline one"],rhymePattern:"1220"},"1/16_1/16_1/8_1/4":{descriptions:["stem,head|w1o5@stem,head,hline one, hline two|w1o5@stem,head,hline one","stem,head"],rhymePattern:"1220,1"},"1/16_1/8_1/16":{descriptions:["stem,head|hline one,hline two|w1o5@hline one,stem,head|w1o5@hline one|hline one,hline two,stem,head"],rhymePattern:"1202"},"1/16_1/8_1/16_1/4":{descriptions:["stem,head|hline one,hline two|w1o5@hline one,stem,head|w1o5@hline one|hline one,hline two,stem,head","stem,head"],rhymePattern:"1202,1"},"1/8_1/4_1/8":{descriptions:["stem,head|flag|stem,head|empty|stem,head|flag"],rhymePattern:"12,02"},"1/8_1/4_1/8_1/4":{descriptions:["stem,head|flag|stem,head|empty|stem,head|flag|stem,head"],rhymePattern:"12,02,1"},"3/32_1/32_1/16_1/16":{descriptions:["stem,head|hline one,hline two,dot|w1o2@stem,head,hline one,hline two,hline three|w1o5@stem,head,hline one, hline two|w1o5@stem,head,hline one, hline two"],rhymePattern:"10022020"},"3/32_1/32_1/16_1/16_1/4":{descriptions:["stem,head|hline one,hline two,dot|w1o2@stem,head,hline one,hline two,hline three|w1o5@stem,head,hline one, hline two|w1o5@stem,head,hline one, hline two","stem,head"],rhymePattern:"10022020,1"},"3/8_1/16_1/16":{descriptions:["stem,head|dot","stem,head|w1o5@hline one,hline two,stem,head"],rhymePattern:"1,0022"},"3/8_1/16_1/16_1/4":{descriptions:["stem,head|dot","stem,head|w1o5@hline one,hline two,stem,head","stem,head"],rhymePattern:"1,0022,1"},"1/16_1/16_3/8":{descriptions:["stem,head|w1o5@hline one,hline two,stem,head","stem,head|dot"],rhymePattern:"1220,0"},"1/16_1/16_3/8_1/4":{descriptions:["stem,head|w1o5@hline one,hline two,stem,head","stem,head|dot","stem,head"],rhymePattern:"1220,0,1"}},rhymePatternRows:[["1/4","1/8_1/8"]]}},methods:{modifyBpm:function(e){this.bpm=this.bpm+e},setRhymePattern:function(e){this.rhymePattern=e},start:function(){this.started=!0,this.$refs.metronome.start()},stop:function(){this.started=!1,this.$refs.metronome.stop()}}},T=O,S=(n("52d2"),Object(f["a"])(T,o,r,!1,null,null,null)),j=S.exports,k=n("f1e2"),M=n.n(k);i["a"].prototype.playAudio=function(){var e=document.getElementById("eventAudio");e.setAttribute("src",M.a),e.play()},document.body.addEventListener("click",(function(e){var t=e||window.event,n=t.target||t.srcElement,o=n.getAttribute("clickMusic");if("true"!==o)return!1;i["a"].prototype.playAudio()})),i["a"].config.productionTip=!1,new i["a"]({render:function(e){return e(j)}}).$mount("#app")},9019:function(e,t,n){},a869:function(e,t,n){"use strict";n("9019")},f1e2:function(e,t,n){e.exports=n.p+"media/boom.550be808.wav"}});
//# sourceMappingURL=app.6c16e7c4.js.map